import{f as M,k as A,c as n,o as a,a as t,l as i,t as b,r as d,g as B,n as q,q as E,s as U,m as s,v as D,x as K,y as $,z as N,F as V,p as L,A as F,b as H}from"./BuKjxDDf.js";const O=["innerHTML"],P=M({__name:"SearchResult",props:{result:{}},setup(R){const c=A(),k=o=>{c.push({path:o+"/"})};return(o,r)=>{var h;return a(),n("div",{id:"resultItem",onClick:r[0]||(r[0]=w=>k(o.result.document.url))},[t("h1",null,b(o.result.document.title),1),o.result.highlights?(a(),n("p",{key:0,innerHTML:(h=o.result.highlights[0])==null?void 0:h.snippet},null,8,O)):i("",!0)])}}}),Q={class:"search-width"},j={style:{"margin-top":"20px","text-align":"left"}},Y={key:0,id:"result-area"},G={key:0,style:{"text-align":"center"}},J={key:1,style:{"text-align":"center"}},W={key:2,style:{"text-align":"center"}},X={key:1},Z={style:{"margin-top":"20px","text-align":"center"}},te=M({__name:"search",setup(R){const c=d(!1),k=async()=>{try{await $fetch("https://blog-search.manesec.com/ping",{timeout:5e3}),c.value=!0}catch{c.value=!1}};B(()=>{q(()=>{window.scrollTo({top:0,behavior:"smooth"})}),k()});const o=d(""),r=d(null),h=d(!1);let w=null;E(o,l=>{clearTimeout(w),l.length>0?w=setTimeout(async()=>{try{h.value=!0;const e=encodeURIComponent(l),u=await $fetch(`https://blog-search.manesec.com/search?per_page=30&q=${e}`);r.value=u}catch(e){console.error("????",e),r.value=null}finally{h.value=!1}},300):r.value=null},{immediate:!0});const m=d(!1),I=()=>{m.value=!m.value},z=d("fuzz"),f=d("模糊搜索 (fuzzy mode)"),x=l=>{switch(document.getElementById("searchbar"),z.value=l,l){case"fuzz":f.value="模糊搜索 (fuzzy mode)";break;case"words":f.value="匹配關鍵字搜索 (exact match words mode)";break;case"sentence":f.value="匹配句子搜索 (exact match sentence mode)";break}m.value=!1},T=()=>{const l=document.getElementById("searchbar");l.value="",m.value=!1},_=()=>{const e=document.getElementById("searchbar").value.trim();if(e===""){F().add({title:"Please enter a search term",description:"You must enter a search term to search",icon:"akar-icons:face-sad",duration:2e3});return}var u="";switch(z.value){case"fuzz":u="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI(e);break;case"words":var v=e.trim().split(/\s+/),y=v.map(g=>`"${g}"`).join(" ");u="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI(y);break;case"sentence":u="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI('"'+e+'"');break}window.open(u,"_blank")};return B(()=>{document.title="搜索一個知識盲區 - Mane's Blog"}),(l,e)=>{var v,y,g,C,S;const u=P;return a(),n("div",Q,[e[7]||(e[7]=t("div",{style:{"text-align":"center","margin-top":"30px"}},[t("h1",{class:"search-title",style:{"font-size":"30px"}},"搜索一個知識盲區 (Beta)")],-1)),t("div",j,[s(c)?i("",!0):(a(),n("input",{key:0,class:"effect-5",id:"searchbar",onKeyup:D(_,["enter"]),style:{"font-size":"20px",width:"100%",height:"50px","z-index":"0",outline:"none"},placeholder:"Search a Knowledge Blind Area on duckduckgo ..."},null,32)),s(c)?U((a(),n("input",{key:1,class:$({"effect-5":!0,searching:s(h)}),"onUpdate:modelValue":e[0]||(e[0]=p=>N(o)?o.value=p:null),style:{"font-size":"20px",width:"100%",height:"50px","z-index":"0",outline:"none","margin-bottom":"10px"},placeholder:"Search a Knowledge Blind Area ..."},null,2)),[[K,s(o)]]):i("",!0)]),s(c)?(a(),n("div",Y,[((v=s(r))==null?void 0:v.found)===void 0?(a(),n("p",G," Please input something to search.")):i("",!0),((y=s(r))==null?void 0:y.found)===0?(a(),n("p",J," No Result! QAQ")):i("",!0),((g=s(r))==null?void 0:g.found)!==void 0?(a(),n("p",W,"Results: "+b((C=s(r))==null?void 0:C.found),1)):i("",!0),(a(!0),n(V,null,L((S=s(r))==null?void 0:S.hits,p=>(a(),n("div",null,[H(u,{result:p},null,8,["result"])]))),256))])):i("",!0),s(c)?i("",!0):(a(),n("div",X,[t("div",Z,[t("button",{class:"dropdown-button",style:{margin:"auto auto"},onClick:I},b(s(f)),1),t("div",{class:$(["dropdown-content",s(m)?"show":""]),style:{margin:"20px auto auto auto"},id:"dropdownMenu"},[t("a",{href:"#",onClick:e[1]||(e[1]=p=>x("fuzz"))},e[4]||(e[4]=[t("p",null,"模糊搜索 (fuzzy mode)",-1),t("p",null,"匹配出現過，或者相關的單詞或句子",-1),t("p",null,"Only match the words or a related words",-1)])),t("a",{href:"#",onClick:e[2]||(e[2]=p=>x("words"))},e[5]||(e[5]=[t("p",null,"匹配關鍵字搜索 (exact match words mode)",-1),t("p",null,"匹配一定會出現的單詞，用空格隔開",-1),t("p",null,"Exactly matches the words and separate by spaces",-1)])),t("a",{href:"#",onClick:e[3]||(e[3]=p=>x("sentence"))},e[6]||(e[6]=[t("p",null,"匹配句子搜索 (exact match sentence mode)",-1),t("p",null,"匹配一定會出現的句子",-1),t("p",null,"Exactly matches the sentence",-1)]))],2)]),t("div",{style:{"text-align":"center","margin-top":"30px"}},[t("button",{class:"button-28",style:{width:"130px"},onClick:T}," Clear "),t("button",{class:"button-27",style:{"margin-left":"20px",width:"130px"},onClick:_}," Search ")])]))])}}});export{te as default};
