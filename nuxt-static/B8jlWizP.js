import{f as _,k as R,c as n,o as a,a as t,l as i,t as k,r as h,g as C,n as I,q as T,s as A,m as s,v as q,x as E,y as S,z as U,F as D,p as K,A as N,b as V}from"./Cg1emZ63.js";const L=["innerHTML"],F=_({__name:"SearchResult",props:{result:{}},setup(m){const r=R(),v=d=>{r.push({path:d+"/"})};return(d,o)=>(a(),n("div",{id:"resultItem",onClick:o[0]||(o[0]=g=>v(m.result.document.url))},[t("h1",null,k(m.result.document.title),1),m.result.highlights?(a(),n("p",{key:0,innerHTML:m.result.highlights[0]?.snippet},null,8,L)):i("",!0)]))}}),H={class:"search-width"},O={style:{"margin-top":"20px","text-align":"left"}},P={key:0,id:"result-area"},Q={key:0,style:{"text-align":"center"}},j={key:1,style:{"text-align":"center"}},Y={key:2,style:{"text-align":"center"}},G={key:1},J={style:{"margin-top":"20px","text-align":"center"}},X=_({__name:"search",setup(m){const r=h(!1),v=async()=>{try{await $fetch("https://blog-search.manesec.com/ping",{timeout:5e3}),r.value=!0}catch{r.value=!1}};C(()=>{I(()=>{window.scrollTo({top:0,behavior:"smooth"})}),v()});const d=h(""),o=h(null),g=h(!1);let x=null;T(d,l=>{clearTimeout(x),l.length>0?x=setTimeout(async()=>{try{g.value=!0;const e=encodeURIComponent(l),c=await $fetch(`https://blog-search.manesec.com/search?per_page=30&q=${e}`);o.value=c}catch(e){console.error("????",e),o.value=null}finally{g.value=!1}},300):o.value=null},{immediate:!0});const p=h(!1),B=()=>{p.value=!p.value},w=h("fuzz"),f=h("模糊搜索 (fuzzy mode)"),y=l=>{switch(document.getElementById("searchbar"),w.value=l,l){case"fuzz":f.value="模糊搜索 (fuzzy mode)";break;case"words":f.value="匹配關鍵字搜索 (exact match words mode)";break;case"sentence":f.value="匹配句子搜索 (exact match sentence mode)";break}p.value=!1},$=()=>{const l=document.getElementById("searchbar");l.value="",p.value=!1},b=()=>{const e=document.getElementById("searchbar").value.trim();if(e===""){N().add({title:"Please enter a search term",description:"You must enter a search term to search",icon:"akar-icons:face-sad",duration:2e3});return}var c="";switch(w.value){case"fuzz":c="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI(e);break;case"words":var u=e.trim().split(/\s+/),M=u.map(z=>`"${z}"`).join(" ");c="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI(M);break;case"sentence":c="https://duckduckgo.com/?q=site%3Amanesec.github.io+"+encodeURI('"'+e+'"');break}window.open(c,"_blank")};return C(()=>{document.title="搜索一個知識盲區 - Mane's Blog"}),(l,e)=>{const c=F;return a(),n("div",H,[e[7]||(e[7]=t("div",{style:{"text-align":"center","margin-top":"30px"}},[t("h1",{class:"search-title",style:{"font-size":"30px"}},"搜索一個知識盲區 (Beta)")],-1)),t("div",O,[s(r)?i("",!0):(a(),n("input",{key:0,class:"effect-5",id:"searchbar",onKeyup:q(b,["enter"]),style:{"font-size":"20px",width:"100%",height:"50px","z-index":"0",outline:"none"},placeholder:"Search a Knowledge Blind Area on duckduckgo ..."},null,32)),s(r)?A((a(),n("input",{key:1,class:S({"effect-5":!0,searching:s(g)}),"onUpdate:modelValue":e[0]||(e[0]=u=>U(d)?d.value=u:null),style:{"font-size":"20px",width:"100%",height:"50px","z-index":"0",outline:"none","margin-bottom":"10px"},placeholder:"Search a Knowledge Blind Area ..."},null,2)),[[E,s(d)]]):i("",!0)]),s(r)?(a(),n("div",P,[s(o)?.found===void 0?(a(),n("p",Q," Please input something to search.")):i("",!0),s(o)?.found===0?(a(),n("p",j," No Result! QAQ")):i("",!0),s(o)?.found!==void 0?(a(),n("p",Y,"Results: "+k(s(o)?.found),1)):i("",!0),(a(!0),n(D,null,K(s(o)?.hits,u=>(a(),n("div",null,[V(c,{result:u},null,8,["result"])]))),256))])):i("",!0),s(r)?i("",!0):(a(),n("div",G,[t("div",J,[t("button",{class:"dropdown-button",style:{margin:"auto auto"},onClick:B},k(s(f)),1),t("div",{class:S(["dropdown-content",s(p)?"show":""]),style:{margin:"20px auto auto auto"},id:"dropdownMenu"},[t("a",{href:"#",onClick:e[1]||(e[1]=u=>y("fuzz"))},[...e[4]||(e[4]=[t("p",null,"模糊搜索 (fuzzy mode)",-1),t("p",null,"匹配出現過，或者相關的單詞或句子",-1),t("p",null,"Only match the words or a related words",-1)])]),t("a",{href:"#",onClick:e[2]||(e[2]=u=>y("words"))},[...e[5]||(e[5]=[t("p",null,"匹配關鍵字搜索 (exact match words mode)",-1),t("p",null,"匹配一定會出現的單詞，用空格隔開",-1),t("p",null,"Exactly matches the words and separate by spaces",-1)])]),t("a",{href:"#",onClick:e[3]||(e[3]=u=>y("sentence"))},[...e[6]||(e[6]=[t("p",null,"匹配句子搜索 (exact match sentence mode)",-1),t("p",null,"匹配一定會出現的句子",-1),t("p",null,"Exactly matches the sentence",-1)])])],2)]),t("div",{style:{"text-align":"center","margin-top":"30px"}},[t("button",{class:"button-28",style:{width:"130px"},onClick:$}," Clear "),t("button",{class:"button-27",style:{"margin-left":"20px",width:"130px"},onClick:b}," Search ")])]))])}}});export{X as default};
